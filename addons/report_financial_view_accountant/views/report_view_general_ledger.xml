<odoo>
    <data>

        <!-- Vista de Lista (Tree) para report.view.general.ledger -->
        <record id="view_report_view_general_ledger_tree" model="ir.ui.view">
            <field name="name">report.view.general.ledger.tree</field>
            <field name="model">report.view.general.ledger</field>
            <field name="arch" type="xml">
                <tree string="Reporte Mayor">

                    <field name="company_id" optional="hide"/>
                    <field name="date_to"/>
                    <field name="date_from"/>

                </tree>
            </field>
        </record>

        <!-- Vista de Búsqueda (Search) para report.view.general.ledger -->
        <record id="view_report_view_general_ledger_search" model="ir.ui.view">
            <field name="name">report.view.general.ledger.search</field>
            <field name="model">report.view.general.ledger</field>
            <field name="arch" type="xml">
                <search string="Reporte Mayor">
                    <group>
                        <filter string="Compañia" name="grp_company" context="{'group_by':'company_id'}"/>
                        <filter string="Fecha" name="grp_date" context="{'group_by':'date_to'}"/>
                    </group>
                    <field name="company_id"/>
                    <field name="date_to"/>
                </search>
            </field>
        </record>

        <!-- Vista de Formulario (Form) para report.view.general.ledger -->
        <record id="view_report_view_general_ledger_form" model="ir.ui.view">
            <field name="name">report.view.general.ledger.form</field>
            <field name="model">report.view.general.ledger</field>
            <field name="arch" type="xml">
                <form string="Reporte Mayor" create="false" delete="false">
                    <header>

                        <button name="action_process" icon="fa-cogs" type="object" string="Ejecutar"
                        />

                        <button name="print_general_ledger"
                            string="Imprimir"
                            type="object"

                            icon="fa-print"/>

                        <button name="action_export_excel"
                            string="Descargar"
                            type="object"

                            icon="fa-xls"/>


                    </header>
                    <sheet>
                        <group>
                            <group>
                                <field name="company_id" options="{'no_create':True,'no_open':True,'no_edit':True}"/>
                                <field name="date_from" />
                                <field name="account_id" options="{'no_create':True,'no_open':True,'no_edit':True}"/>
                                <field name="partner_id" options="{'no_create':True,'no_open':True,'no_edit':True}"/>
                                <field name="account_analytic_id" invisible="1" options="{'no_create':True,'no_open':True,'no_edit':True}"/>
                                <field name="target_move" />
                            </group>
                            <group>
                                <field name="currency_id" options="{'no_create':True,'no_open':True,'no_edit':True}"/>
                                <field name="date_to" />
                                <field name="journal_id" options="{'no_create':True,'no_open':True,'no_edit':True}" />
                                <field name="sortby" />
                                <field name="total_accumulated" string="Total Acumulado"/>
                            </group>

                        </group>


                        <newline/>
                        <field name="line_ids"
                        context="{'tree_view_ref':'report_financial_view_accountant.view_report_view_general_ledger_line_tree'}"></field>



                    </sheet>

                </form>
            </field>
        </record>


        <!-- Acción para abrir las vistas de Tree y Form -->
        <record id="action_report_view_general_ledger" model="ir.actions.act_window">
            <field name="name">Reporte Mayor</field>
            <field name="res_model">report.view.general.ledger</field>
            <field name="view_mode">form</field>
            <field name="view_id" ref="view_report_view_general_ledger_form"/>
            <field name="target">current</field>
            <field name="context">{'fullscreen':True}</field>
        </record>


    </data>
</odoo>
