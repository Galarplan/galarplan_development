<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <data>


        <!-- Plantilla del Reporte -->
        <template id="report_general_ledger_template">
            <t t-call="web.html_container">
                <t t-foreach="docs" t-as="doc">
                   <div class="header" style="width:100%">
    <h2 style="text-align: center;">Reporte Mayor</h2>
<table style="width: 100%; border-collapse: collapse; border: none;">
    <tr>
        <td style="width: 15%; border: none;"><strong>Compañía:</strong></td>
        <td style="width: 35%; border: none;"><t t-esc="doc.company_id.name"/></td>
        <td style="width: 15%; border: none;"><strong>Estado:</strong></td>
        <td style="width: 35%; border: none;"><t t-esc="dict(doc._fields['target_move'].selection).get(doc.target_move)"/></td>
    </tr>
    <tr>
        <td style="width: 15%; border: none;"><strong>Desde:</strong></td>
        <td style="width: 35%; border: none;"><t t-esc="doc.date_from"/></td>
        <td style="width: 15%; border: none;"><strong>Hasta:</strong></td>
        <td style="width: 35%; border: none;"><t t-esc="doc.date_to"/></td>
    </tr>
    <tr>
        <td style="width: 15%; border: none;"><strong>Diario:</strong></td>
        <td style="width: 35%; border: none;"><t t-esc="doc.journal_id and doc.journal_id.name or 'TODOS'"/></td>
        <td style="width: 15%; border: none;"><strong>Cuenta:</strong></td>
        <td style="width: 35%; border: none;"><t t-esc="doc.account_id.code"/> / <t t-esc="doc.account_id.name"/></td>
    </tr>
</table>
</div>



                    <table class="table table-condensed" style="with:100%" >
                        <thead>
                            <tr style="background-color: #ddd; font-weight: bold;">
                                <th style="text-align:center;width:10%;">Fecha</th>
                                <th style="text-align:center;width:30%;">Diario</th>
                                <th style="text-align:center;width:30%;">Referencia</th>
                                <th style="text-align:center;width:10%;">Debe</th>
                                <th style="text-align:center;width:10%;">Haber</th>
                                <th style="text-align:center;width:10%;">Acumulado</th>
                            </tr>
                        </thead>
                        <tbody>
                            <t t-foreach="doc.line_ids" t-as="line">
                                <tr>
                                    <td style="width:10%;"><t t-esc="line.date"/></td>
                                    <td style="width:30%;"><t t-esc="line.journal_id.name"/></td>
                                    <td style="width:30%;"><t t-esc="line.name"/></td>
                                    <td style="width:10%;text-align:right;"><t t-esc="'{:.2f}'.format(line.debit)"/></td>
                                    <td style="width:10%;text-align:right;"><t t-esc="'{:.2f}'.format(line.credit)"/></td>
                                    <td style="width:10%;text-align:right;"><t t-esc="'{:.2f}'.format(line.amount_accumulated)"/> </td>
                                </tr>
                            </t>
                        </tbody>
                    </table>
                </t>
            </t>
        </template>




    <!-- Definición del Reporte -->
        <report
            id="report_general_ledger"
            model="report.view.general.ledger"
            string="Reporte Mayor"
            report_type="qweb-pdf"
            name="report_financial_view_accountant.report_general_ledger_template"
            file="report_financial_view_accountant.report_general_ledger_template"
        />

    </data>
</odoo>
