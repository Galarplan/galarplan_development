<?xml version="1.0" encoding="utf-8"?>
<odoo>

	<record id="pdc_registr_view_tree" model="ir.ui.view">
            <field name="name">pdc.registr.tree</field>
            <field name="model">pdc.registr</field>
            <field name="arch" type="xml">
            	<tree decoration-success="state=='matured'" decoration-danger="state=='cancel'" create="false">
                	<field name="reg_date"/>
                    <field name="name"/>
                    <field name="partner_id"/>
    				<field name="cheque_no" string="Cheque No"/>
                    <field name="bank_id"/>
    				<field name="mature_date" string="Cheque/Mature Date"/>
    				<field name="payment_type"/>
                    <field name="currency_id" invisible="1"/>
                    <field name="cheque_amount" sum="Total"/>
    				<field name="state"/>
                    <button states="matured" type="object" name="action_process" string="Process" class="oe_highlight"/>
                </tree>
            </field>
        </record>

	<record id="pdc_registr_view_form" model="ir.ui.view">
        <field name="name">pdc.registr.form</field>
        <field name="model">pdc.registr</field>
        <field name="arch" type="xml">
            <form string="PDC Register" duplicate="0">
                <header>
                    <button name="action_validate" class="oe_highlight" states="draft" string="Validate" type="object"/>
                    <button name="action_process" class="oe_highlight" states="matured" string="Process" type="object"/>
                    <field name="state" widget="statusbar" statusbar_visible="matured,valid,processed"/>
                </header>
                <sheet>
                    <div class="oe_title">
                        <label for="name" string="Post-Dated Cheque"/>
                        <div class="oe_inline">
                            <h1><field name="name" attrs="{'readonly':[('state','!=','draft')]}"/></h1>
                        </div>
                    </div>
                    <group>
                        <group>
                            <field name="partner_id" attrs="{'readonly':[('state','!=','draft')]}"/>
                            <field name="payment_type" readonly="1"/>
                        </group>
                        <group>
                            <field name="payment_id" attrs="{'invisible':[('payment_id','=',False)], 'readonly':[('state','!=','draft')]}"/>
                            <field name="reg_date" attrs="{'readonly':[('state','!=','draft')]}"/>
                            <field name="mature_date" attrs="{'readonly':[('state','!=','draft')]}"/>
                            <field name="memo" attrs="{'readonly':[('state','!=','draft')]}"/>
                        </group>
                    </group>
                        <group>
                            <field name="currency_id" invisible="1"/>
                            <field name="cheque_amount" widget="monetary" required="1"
                            attrs="{'readonly':[('state','!=','draft')]}"/>
                            <field name="cheque_no" attrs="{'readonly':[('state','!=','draft')]}"/>


                        </group>
                        <group>
                            <field name="bank_id"/>
<!--                            <field name="bank_journal_id"/>-->

                        </group>

                </sheet>
            </form>
        </field>
    </record>

    <record id="pdc_registr_view_search_view" model="ir.ui.view">
        <field name="name">pdc.registr.search</field>
        <field name="model">pdc.registr</field>
        <field name="arch" type="xml">
        <search string="Accounts">
            <field name="name" string="Name"/>
            <field name="partner_id" string="Partner"/>
<!--            <field name="cheque_id" string="Cheque"/>-->

            <field name="state" string="Status"/>
            <separator/>
            <filter string="Draft" name="draft_status" domain="[('state', '=', 'draft')]"/>
            <filter string="Validated" name="valid_status" domain="[('state', '=', 'valid')]"/>
            <filter string="Matured" name="matured_status" domain="[('state', '=', 'matured')]"/>
            <filter string="Processed" name="processed_status" domain="[('state', '=', 'processed')]"/>
            <filter string="Cancel" name="cancel_status" domain="[('state', '=', 'cancel')]"/>
            <separator/>
            <filter string="Send Money" name="payment_type_send" domain="[('payment_type', '=', 'outbound')]"/>
            <filter string="Receive Money" name="payment_type_receive" domain="[('payment_type', '=', 'inbound')]"/>
            <separator/>
            <filter string="Status" name="state" domain="[]" context="{'group_by': 'state'}"/>
            <filter string="Partner" name="partner_id" domain="[]" context="{'group_by': 'partner_id'}"/>
            <filter string="Payment Type" name="payment_type" domain="[]" context="{'group_by': 'payment_type'}"/>
        </search>
        </field>
    </record>


    <record id="action_pdc_registr_payment_pdc" model="ir.actions.act_window">
        <field name="name">Payments</field>
        <field name="res_model">pdc.registr</field>
        <field name="view_mode">tree,form</field>
        <field name="domain">[('payment_type','=','outbound')]</field>
        <field name="view_id" ref="pdc_registr_view_tree"/>
        <field name="search_view_id" ref="pdc_registr_view_search_view"/>
    </record>

    <record id="action_pdc_registr_receipt_pdc" model="ir.actions.act_window">
        <field name="name">Receipts</field>
        <field name="res_model">pdc.registr</field>
        <field name="view_mode">tree,form</field>
        <field name="domain">[('payment_type','=','inbound')]</field>
        <field name="view_id" ref="pdc_registr_view_tree"/>
        <field name="search_view_id" ref="pdc_registr_view_search_view"/>
    </record>

	<menuitem id="pdc_registr_account_main_menu"
    name="PDC Register" sequence="57"/>

    <menuitem name="Payments"
              id="menu_action_pdc_registr_payment_pdc"
              parent="pdc_registr_account_main_menu"
              action="action_pdc_registr_payment_pdc"
              sequence="2"/>

    <menuitem name="Receipts"
              id="menu_action_pdc_registr_receipt_pdc"
              parent="pdc_registr_account_main_menu"
              action="action_pdc_registr_receipt_pdc"
              sequence="3"/>

</odoo>