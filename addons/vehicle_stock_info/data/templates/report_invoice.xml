<?xml version="1.0" encoding="UTF-8"?>
<odoo>

    <data>
        <template id="custom_report_invoice_header">
            <div style="position: relative !important; top: -50px; z-index:1;font-size:12px;">
                <div class="row" name="zero_line">
                    <div class="col-12">
                        <p class="m-0">
                            <strong>Name:</strong>
                            <span t-esc="docs.partner_id.name" />
                        </p>
                    </div>
                </div>
                <div class="row" name="fist_line">
                    <div class="col-6">
                        <t t-if="docs.partner_id.vat">
                            <p class="m-0">
                                <strong>
                                    <span
                                        t-esc="docs.partner_id.l10n_latam_identification_type_id.name"
                                        id="inv_tax_id_label" />
                                </strong>
                                <t t-esc="docs.partner_id.vat" />
                            </p>
                        </t>
                    </div>
                    <div class="col-6">
                        <t t-if="docs.partner_id.email">
                            <p class="m-0">
                                <strong>Email:</strong>
                                <span class="m-0" t-field="docs.partner_id.email" />
                            </p>
                        </t>
                    </div>
                </div>
                <div class="row" name="second_line">
                    <div class="col-12">
                        <t t-if="docs.partner_id.street">
                            <p class="m-0">
                                <strong>Address:</strong>
                                <t t-if="docs.partner_id.street">
                                    <span>
                                        <t t-esc="docs.partner_id.street" />
                                    </span>
                                </t>
                                <!-- <t t-if="docs.partner_id.city_id">
                                    <span>, <t t-esc="docs.partner_id.city_id.name.upper()" />
                                    </span>
                                </t> -->
                                <t t-if="docs.partner_id.state_id">
                                    <span>, <t t-esc="docs.partner_id.state_id.name.upper()" />
                                    </span>
                                </t>
                                <t t-if="docs.partner_id.country_id">
                                    <span>, <t t-esc="docs.partner_id.country_id.name.upper()" />
                                    </span>
                                </t>
                            </p>
                        </t>
                    </div>
                </div>
                <div class="row" name="third_line">
                    <div class="col-6">
                        <t t-if="docs.partner_id.phone">
                            <p class="m-0">
                                <strong>Phone:</strong>
                                <span>
                                    <t t-esc="docs.partner_id.phone" />
                                </span>
                            </p>
                        </t>
                    </div>
                </div>
                <div class="row" name="fourth_line">
                    <div class="col-6">
                        <div class="col-6" t-if="docs.partner_id.ref" name="customer_code">
                            <strong>Customer Code:</strong>
                            <p class="m-0" t-field="docs.partner_id.ref" />
                        </div>
                    </div>
                </div>
                <div class="row" name="fifth_line">
                    <div class="col-6">
                        <div t-if="docs.invoice_date" name="invoice_date">
                            <p class="m-0">
                                <strong>Invoice Date:</strong>
                                <span t-field="docs.invoice_date" />
                            </p>
                        </div>
                    </div>
                    <div class="col-6"
                        t-if="docs.invoice_date_due and docs.move_type == 'out_invoice' and docs.state == 'posted'"
                        name="due_date">
                        <p class="m-0">
                            <strong>Due Date:</strong>
                            <span class="m-0" t-field="docs.invoice_date_due" />
                        </p>
                    </div>
                </div>
                <div class="row" name="sixth_line">
                    <div class="col-6" t-if="docs.invoice_payment_term_id" name="payment_term_code">
                        <div t-if="docs.invoice_payment_term_id" name="payment_term">
                            <strong>Payment Term:</strong>
                            <span t-field="docs.invoice_payment_term_id.name" />
                        </div>
                    </div>
                    <div class="col-6" t-if="docs.invoice_user_id" name="user_id_code">
                        <div t-if="docs.invoice_user_id" name="user_id_term">
                            <strong>Seller:</strong>
                            <span t-field="docs.invoice_user_id.name" />
                        </div>
                    </div>
                </div>
                <div class="row" name="seventh_line">
                    <div class="col-6" t-if="docs.invoice_origin" name="origin">
                        <strong>Source:</strong>
                        <p class="m-0" t-field="docs.invoice_origin" />
                    </div>
                </div>
                <div class="row" name="eighth_line">
                    <div class="col-6" t-if="docs.fiscal_position_id" name="position_code">
                        <p t-if="docs.fiscal_position_id.note" name="note">
                            <span t-field="docs.fiscal_position_id.note" />
                        </p>
                    </div>
                    <div class="col-6" t-if="docs.invoice_incoterm_id" name="icomterm_code">
                        <p t-if="docs.invoice_incoterm_id" name="incoterm">
                            <strong>Incoterm:</strong>
                            <span t-field="docs.invoice_incoterm_id.code" />
                            - <span
                                t-field="docs.invoice_incoterm_id.name" />
                        </p>
                    </div>
                </div>
                <div name="electronic_info" class="row">
                </div>
                <div style="height:4%;">
                    <p />
                </div>
            </div>
        </template>

        <template id="custom_sri_auth">
            <div style="position: relative !important; top: -50px; z-index:1;font-size:12px;">
                <div class="row" name="info_electronic_data">
                    <div class="col-12 text-center"
                        t-att-style="'border-top: 1px solid {0}; background: {1}; color: {2}; margin-left: 12px; width:98%;'.format('#C1C1C1', '#C1C1C1', '#000000')">
                        <strong>SRI Authorization</strong>
                    </div>
                </div>
                <div class="row" name="data_line_1">
                    <div class="col-12" t-if="docs.l10n_ec_authorization_number">
                        <p class="m-0">
                            <strong>Authorization:</strong>
                            <span class="m-0" t-if="docs.l10n_ec_authorization_number"
                                t-field="docs.l10n_ec_authorization_number" />
                        </p>
                    </div>
                </div>
                <div class="row" name="data_line_2">
                    <div class="col-12">
                        <p class="m-0">
                            <strong>Access Key:</strong>
                            <span class="mm-0" t-if="docs.l10n_ec_authorization_number"
                                t-field="docs.l10n_ec_authorization_number" />
                        </p>
                    </div>
                </div>
                <div class="row" name="data_line_3">
                    <div class="col-8">
                        <div class="row col-6 col-12">
                            <strong>Authorization Date:</strong>
                            <span class="m-0" t-if="docs.invoice_date" t-field="docs.invoice_date" />
                        </div>
                        <div class="row col-3 col-12">
                            <strong>Emission: </strong>Normal </div>
                        <div class="row col-3 col-12">
                            <strong>Environment:</strong>
                            <t t-if="o.company_id.l10n_ec_production_env">Production</t>
                            <t t-else="">Testing</t>
                        </div>
                    </div>
                    <div class="col-4" name="barcode_ec">
                        <div name="right_box">
                            <t t-if="o.l10n_ec_authorization_number">
                                <!-- <div class="text-center" style="font-size: 12px">
                                    <strong>Authorization No.: <span
                                            t-field="o.l10n_ec_authorization_number" /></strong>
                                </div> -->
                                <div class="text-justify">
                                    <img style="width:100%; height:15.5mm;"
                                        t-att-src="'/report/barcode/Code128/' + o.l10n_ec_authorization_number"
                                        alt="Missing barcode for authorization number"
                                    />
                                </div>
                                <!-- <div class="text-center" style="font-size: 12px">
                                    <strong>Access Key: <span t-field="o.l10n_ec_authorization_number" /></strong>
                                </div> -->
                                <div class="text-center" style="font-size: 8px">
                                    <strong>
                                        <span t-field="o.l10n_ec_authorization_number" />
                                    </strong>
                                </div>
                            </t>
                        </div>
                    </div>
                </div>
            </div>
        </template>


        <!-- Heredar el template 'account.report_invoice_document' -->
        <template id="report_invoice_document_custom" inherit_id="account.report_invoice_document">
            <!-- Localizar la celda que deseas modificar -->
            <xpath expr="//td[@name='account_invoice_line_name']" position="replace">
                <!-- Sobrescribir la celda con el nuevo contenido -->
                <td name="account_invoice_line_name">
                    <span t-field="line.name" t-options="{'widget': 'text', 'style': 'font-weight: bold;'}" />
                    <t t-if="line.product_id.is_a_vehicle">
                        <br />
                        <span>Chassis:</span>
                        <span t-field="line.product_id.chassis_number" />
                        <br />
                        <span>Número de Motor:</span>
                        <span t-field="line.product_id.engine_number" />
                        <br />
                        <span>Número RAMW:</span>
                        <span t-field="line.product_id.ramw_number" />
                        <br />
                        <span>Marca:</span>
                        <span t-field="line.product_id.vehicle_brand_id.name" />
                        <br />
                        <span>Modelo:</span>
                        <span t-field="line.product_id.vehicle_model_id.name" />
                        <br />
                        <span>Modelo Homologado:</span>
                        <span t-field="line.product_id.modelo_homologado_ant" />
                        <br />
                        <span>Modelo SRI:</span>
                        <span t-field="line.product_id.modelo_SRI" />
                        <br />
                        <span>Color:</span>
                        <span t-field="line.product_id.vehicle_color" />
                        <br />
                        <span>Asientos:</span>
                        <span t-field="line.product_id.number_of_seats" />
                        <br />
                        <span>Puertas:</span>
                        <span t-field="line.product_id.number_of_doors" />
                        <br />
                        <span>Llantas:</span>
                        <span t-field="line.product_id.number_of_tires" />
                        <br />
                        <span>Tonelaje:</span>
                        <span t-field="line.product_id.ton" />
                        <br />
                        <span>Ejes:</span>
                        <span t-field="line.product_id.number_of_axles" />
                        <br />
                        <span>Año del Modelo:</span>
                        <span t-field="line.product_id.model_year" />
                        <br />
                        <span>Transmisión:</span>
                        <span t-field="line.product_id.transmission" />
                        <br />
                        <span>Combustible:</span>
                        <span t-field="line.product_id.fuel_type" />
                        <br />
                        <span>Cilindraje:</span>
                        <span t-field="line.product_id.cylinder_capacity" />
                    </t>
                </td>
            </xpath>
        </template>


        <template id="custom_report_invoice_document"
            inherit_id="l10n_ec_edi.report_invoice_document">
            <!-- Reemplazar el <t t-call="l10n_ec_edi.report_invoice_header"> con tu template
            personalizado -->
            <xpath expr="//t[@t-call='l10n_ec_edi.report_invoice_header']" position="replace">
                <t t-call="vehicle_stock_info.custom_report_invoice_header" />
                <t t-call="vehicle_stock_info.custom_sri_auth" />
            </xpath>

            <xpath expr="//div[@id='informations']" position="replace">
                <!-- Este contenido reemplazará el bloque original -->
                <div></div>
            </xpath>

        </template>


    </data>


</odoo>